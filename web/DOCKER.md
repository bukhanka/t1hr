# Docker Setup –¥–ª—è SciBox Talent Management System

## üöÄ –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

1. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
```bash
cp env.example .env.local
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ SCIBOX_API_KEY –≤ .env.local
```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø–æ–ª–Ω—É—é —Å—Ä–µ–¥—É —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:**
```bash
make setup  # –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç –ë–î
make dev-up # –ü–æ—Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—É—Å–∫–∏
```

3. **–î–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é:** http://localhost:3000

### –î–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

1. **–°–æ–±–µ—Ä–∏—Ç–µ production –æ–±—Ä–∞–∑:**
```bash
make prod-build
```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ production —Å—Ä–µ–¥—É:**
```bash
make prod-up
```

## üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `make setup` | –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –Ω–æ–≤—ã—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ |
| `make dev-up` | –ó–∞–ø—É—Å–∫ —Å—Ä–µ–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ |
| `make dev-down` | –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ä–µ–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ |
| `make db-up` | –ó–∞–ø—É—Å–∫ —Ç–æ–ª—å–∫–æ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö |
| `make db-down` | –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö |
| `make prod-build` | –°–±–æ—Ä–∫–∞ production –æ–±—Ä–∞–∑–∞ |
| `make prod-up` | –ó–∞–ø—É—Å–∫ production —Å—Ä–µ–¥—ã |
| `make logs` | –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è |
| `make db-migrate` | –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π –ë–î |
| `make clean` | –û—á–∏—Å—Ç–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –∏ —Ç–æ–º–æ–≤ |

## üê≥ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

### Development (docker-compose.dev.yml)
- **app** - Next.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ dev —Ä–µ–∂–∏–º–µ —Å hot reload
- **postgres** - PostgreSQL 16 —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º pgvector
- **redis** - Redis –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

### Production (docker-compose.yml)
- **postgres** - PostgreSQL —Å pgvector
- **redis** - Redis
- **app** (–ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ prod-up) - Next.js –≤ production —Ä–µ–∂–∏–º–µ

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### PostgreSQL
- **–ü–æ—Ä—Ç:** 5432
- **–ë–∞–∑–∞:** scibox_talent_db
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:** postgres
- **–ü–∞—Ä–æ–ª—å:** password
- **–†–∞—Å—à–∏—Ä–µ–Ω–∏—è:** pgvector –¥–ª—è –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞

### Redis
- **–ü–æ—Ä—Ç:** 6379
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ, —Å–µ—Å—Å–∏–∏ (–≤ –±—É–¥—É—â–µ–º)

### Next.js App
- **–ü–æ—Ä—Ç:** 3000
- **–†–µ–∂–∏–º—ã:** development (hot reload) / production (optimized)

## üìù –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ `.env.local` –Ω–∞ –æ—Å–Ω–æ–≤–µ `env.example`:

```env
# Database (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –¥–ª—è Docker)
DATABASE_URL="postgresql://postgres:password@postgres:5432/scibox_talent_db?schema=public"

# SciBox API (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–∫–∞–∑–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π –∫–ª—é—á)
SCIBOX_API_KEY="your-real-api-key-here"
SCIBOX_API_BASE_URL="https://llm.t1v.scibox.tech/v1"

# NextAuth
NEXTAUTH_SECRET="your-secret-key"
NEXTAUTH_URL="http://localhost:3000"
```

## üîç –û—Ç–ª–∞–¥–∫–∞

### –õ–æ–≥–∏
```bash
make logs        # –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
make logs-db     # –õ–æ–≥–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```

### –î–æ—Å—Ç—É–ø –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º
```bash
docker exec -it scibox-talent-app sh     # Next.js –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker exec -it scibox-talent-db psql -U postgres scibox_talent_db  # PostgreSQL
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
```bash
docker-compose ps  # –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
```

## üõ†Ô∏è –§–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

- `Dockerfile` - Production –æ–±—Ä–∞–∑ Next.js
- `Dockerfile.dev` - Development –æ–±—Ä–∞–∑ Next.js
- `docker-compose.yml` - –û—Å–Ω–æ–≤–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã (–ë–î + Redis)
- `docker-compose.dev.yml` - –î–æ–ø–æ–ª–Ω–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- `scripts/init-db.sql` - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è PostgreSQL —Å pgvector
- `.dockerignore` - –ò—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è —Å–±–æ—Ä–∫–∏ –æ–±—Ä–∞–∑–æ–≤
- `Makefile` - –£–¥–æ–±–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ health checks:
- PostgreSQL: –ø—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∏ –ø—Ä–∏ —Å–±–æ—è—Ö
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

## üîÑ Workflow —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

1. `make setup` (—Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–π —Ä–∞–∑)
2. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å `make dev-up`
3. –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞—é—Ç—Å—è
4. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å `make dev-down`
5. –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å `make clean`
